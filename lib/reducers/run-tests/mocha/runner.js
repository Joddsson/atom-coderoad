function runner(e){var t=_.flatten(e);console.log(t);var o={cwd:global.coderoad.dir};null==o.env&&(o.env=Object.create(process.env)),o.env.ATOM_SHELL_INTERNAL_RUN_AS_NODE=1,o.env.DIR=global.coderoad.dir;var s="darwin"===process.platform?path.resolve(process.resourcesPath,"..","Frameworks","Atom Helper.app","Contents","MacOS","Atom Helper"):process.execPath,r=spawn(s,["/usr/local/bin/mocha","--bail","--reporter="+path.join(__dirname,"reporter")].concat(t),o);r.stdout.on("data",function(t){var o=JSON.parse(t),s=null;if(o.failedAt){var r=o.failures[0],a=findFailureTestPosition(e,o.failedAt);s=a===_base_1.store.getState().taskPosition?{pass:!1,taskPosition:a,msg:r.msg,desc:r.body}:{pass:!1,taskPosition:a}}else s={pass:!0,taskPosition:e.length},_base_1.store.dispatch(Action.pageComplete());_base_1.store.dispatch(Action.testResult(s))}),r.stderr.on("data",function(e){console.log("test error "+e)}),r.on("close",function(e){_base_1.store.dispatch(Action.testComplete())})}function findFailureTestPosition(e,t){for(var o=0;o<e.length;o++)if(e[o].indexOf(t)>-1)return o}var path=require("path"),_base_1=require("../../../_base"),Action=require("../../../actions/actions"),_=require("lodash"),spawn=require("child_process").spawn;Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=runner;