function runner(e){console.log("dir",path.join(__dirname,"reporter"));var o=_.flatten(e),t={cwd:editor_1.dir()};null==t.env&&(t.env=Object.create(process.env)),t.env.ATOM_SHELL_INTERNAL_RUN_AS_NODE=1;var s="darwin"===process.platform?path.resolve(process.resourcesPath,"..","Frameworks","Atom Helper.app","Contents","MacOS","Atom Helper"):process.execPath,r=spawn(s,["/usr/local/bin/mocha","--bail","--reporter="+path.join(__dirname,"reporter")].concat(o),t);r.stdout.on("data",function(o){var t=JSON.parse(o);console.log(t);var s=null;if(t.failedAt){var r=t.failures[0],a=findFailureTestPosition(e,t.failedAt);s=a===_base_1.store.getState().taskPosition?{pass:!1,taskPosition:a,msg:r.msg,desc:r.body}:{pass:!1,taskPosition:a}}else s={pass:!0,taskPosition:e.length},_base_1.store.dispatch(Action.pageComplete());console.log("files",e),console.log("result",s),_base_1.store.dispatch(Action.testResult(s))}),r.stderr.on("data",function(e){console.log("stderr: "+e)}),r.on("close",function(e){_base_1.store.dispatch(Action.testComplete()),console.log("child process exited with code "+e)})}function findFailureTestPosition(e,o){for(var t=0;t<e.length;t++)if(e[t].indexOf(o)>-1)return console.log(e[t],o,t),t}var path=require("path"),_base_1=require("../../../_base"),Action=require("../../../actions/actions"),editor_1=require("../../../atom/editor"),_=require("lodash"),spawn=require("child_process").spawn;Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=runner;