function runner(e){console.log("dir",path.join(__dirname,"reporter"));var o=_.flatten(e),r={cwd:editor_1.dir()};null==r.env&&(r.env=Object.create(process.env)),r.env.ATOM_SHELL_INTERNAL_RUN_AS_NODE=1;var t="darwin"===process.platform?path.resolve(process.resourcesPath,"..","Frameworks","Atom Helper.app","Contents","MacOS","Atom Helper"):process.execPath,s=spawn(t,["/usr/local/bin/mocha","--bail","--reporter="+path.join(__dirname,"reporter")].concat(o),r);s.stdout.on("data",function(o){var r=JSON.parse(o);console.log(r);var t=null;if(r.failedAt){var s=r.failures[0];t={pass:!1,taskPosition:findFailureTestPosition(e,r.failedAt),msg:s.msg,desc:s.body}}else t={pass:!0,taskPosition:e.length},_base_1.store.dispatch(Action.pageComplete());console.log("files",e),console.log("result",t),_base_1.store.dispatch(Action.testResult(t))}),s.stderr.on("data",function(e){console.log("stderr: "+e)}),s.on("close",function(e){_base_1.store.dispatch(Action.testComplete()),console.log("child process exited with code "+e)})}function findFailureTestPosition(e,o){for(var r=0;r<e.length;r++)if(e[r].indexOf(o)>-1)return console.log(e[r],o,r),r}var path=require("path"),_base_1=require("../../../_base"),Action=require("../../../actions/actions"),editor_1=require("../../../atom/editor"),_=require("lodash"),spawn=require("child_process").spawn;Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=runner;